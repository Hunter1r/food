(()=>{var t={145:t=>{t.exports=function(){const t=document.querySelectorAll("[data-show-modal]"),e=(document.querySelector(".modal__close"),document.querySelector(".modal"));function s(t){t.classList.toggle("show"),t.classList.contains("show")?document.body.style.overflow="hidden":document.body.style.overflow="",clearInterval(i)}t.forEach((t=>{t.addEventListener("click",(()=>{s(e)}))})),e.addEventListener("click",(t=>{t.target!==e&&""!=t.target.getAttribute("data-close")||s(e)})),document.addEventListener("keydown",(t=>{"Escape"===t.code&&e.classList.contains("show")&&s(e)}));const i=setTimeout((()=>{s(e)}),5e4);window.addEventListener("scroll",(function t(){window.pageYOffset+document.documentElement.clientHeight>=document.documentElement.scrollHeight&&(s(e),window.removeEventListener("scroll",t))}))}},765:t=>{t.exports=function(){const t=document.querySelectorAll("div.tabcontent"),e=document.querySelector("div.tabheader__items"),s=document.querySelectorAll(".tabheader__item");function i(){t.forEach(((t,e)=>{t.classList.add("hide"),t.classList.remove("show","fade"),s[e].classList.remove("tabheader__item_active")}))}function n(e=0){t.forEach(((t,i)=>{e==i&&(t.classList.add("show","fade"),t.classList.remove("hide"),s[i].classList.add("tabheader__item_active"))}))}e.addEventListener("click",(function(t){const e=t.target;e&&e.classList.contains("tabheader__item")&&s.forEach(((t,s)=>{e==t&&(i(),n(s))}))})),i(),n(0)}},594:t=>{t.exports=function(){function t(t){return t>=0&&t<10?`0${t}`:t}!function(){const e=document.querySelector("#days"),s=document.querySelector("#hours"),i=document.querySelector("#minutes"),n=document.querySelector("#seconds"),o=setInterval(a,1e3);function a(){const a=function(t){const e=Date.parse("2021-03-31");let s,i,n,o,a=e-(new Date).getTime();return a>=0?(s=Math.floor(a/864e5),i=Math.floor(a/36e5%24),n=Math.floor(a/1e3/60%60),o=Math.floor(a/1e3%60)):(a=0,s=0,i=0,n=0,o=0),{total:e,days:s,hours:i,minutes:n,seconds:o}}();e.textContent=t(a.days),s.textContent=t(a.hours),i.textContent=t(a.minutes),n.textContent=t(a.seconds),a.total<=0&&clearInterval(o)}a()}()}}},e={};function s(i){var n=e[i];if(void 0!==n)return n.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,s),o.exports}document.addEventListener("DOMContentLoaded",(function(){const t=s(765),e=s(594),i=s(145);t(),e(),i();class n{constructor(t,e,s,i,n,o,...a){this.src=t,this.alt=e,this.title=s,this.descr=i,this.price=n,this.parent=document.querySelector(o),this.clases=a,this.transfer=30,this.convertToRUB()}convertToRUB(){this.price=this.price*this.transfer}render(){const t=document.createElement("div");0===this.clases.length?t.classList.add("menu__item"):this.clases.forEach((e=>t.classList.add(e))),t.innerHTML=`\n                    <img src=${this.src} alt=${this.alt}>\n                    <h3 class="menu__item-subtitle">${this.title}</h3>\n                    <div class="menu__item-descr">${this.descr}</div>\n                    <div class="menu__item-divider"></div>\n                    <div class="menu__item-price">\n                        <div class="menu__item-cost">Цена:</div>\n                        <div class="menu__item-total"><span>${this.price}</span> руб/день</div>\n                    </div>\n            `,this.parent.append(t)}}const o=async t=>{const e=await fetch(t);if(!e.ok)throw new Error(`Could not fetch ${t}, status ${e.status}`);return await e.json()};o("http://localhost:3000/menu").then((t=>{t.forEach((({img:t,altimg:e,title:s,descr:i,price:o})=>{new n(t,e,s,i,o,".menu .container","menu__item").render()}))}));const a=document.querySelectorAll("form");function c(t){const e=document.querySelector(".modal__dialog");e.classList.add("hide"),i.classList.contains("show")||showModal(i);const s=document.createElement("div");s.classList.add("modal__dialog"),s.innerHTML=`\n            <div class="modal__content">\n            <div class="modal__close" data-close>&times;</div>\n                <div class="modal__title">\n                ${t}\n                </div>\n            </div>\n        `,i.insertAdjacentElement("beforeend",s),setTimeout((()=>{s.remove(),i.classList.add("show"),showModal(i),e.classList.remove("hide")}),4e3)}a.forEach((t=>{var e;(e=t).addEventListener("submit",(t=>{t.preventDefault();const s=document.createElement("img");s.src="img/form/spinner.svg",s.style.cssText="\n            display: block;\n            margin: 0 auto;\n            ",e.append(s);const i=new FormData(e);(async(t,e)=>{const s=await fetch("http://localhost:3000/requests",{method:"POST",headers:{"content-type":"application/json"},body:e});return await s.json()})(0,JSON.stringify(Object.fromEntries(i.entries()))).then((t=>{console.log(t),c("Спасибо! Мы скоро свяжемся с вами"),s.remove()})).catch((()=>{c("Что-то пошло не так")})).finally((()=>{e.reset()}))}))}));const r=document.querySelector(".offer__slider"),l=document.querySelector(".offer__slider-wrapper"),d=document.querySelector(".offer__slider-inner"),h=document.querySelector(".offer__slider-click__area"),u=document.querySelector("#total"),m=document.querySelector("#current"),f=document.querySelector(".offer__slider-next"),g=document.querySelector(".offer__slider-prev"),v=window.getComputedStyle(l).width;window.getComputedStyle(r).height;class _{constructor(t,e){this.container=t,this.clickArea=e,this.startPosition=0,this.slideIndex=0,this.scrollValue=+v.slice(0,v.length-2),this.count=t.children.length,this.slides=t.children,this.offset=0,this.moving=this.moving.bind(this),this.endMoving=this.endMoving.bind(this),this.arrIndicators=[],this.direction=""}initHandler(){this.clickArea.addEventListener("mousedown",(t=>{t.target.matches(".left")?this.direction="right":this.direction="left",this.startPosition=t.clientX,document.body.addEventListener("mousemove",this.moving),document.body.addEventListener("mouseup",this.endMoving)}))}changeStateIndicators(t,e,s){t.length<10?e.textContent=`0${this.slideIndex+1}`:e.textContent=`${this.slideIndex+1}`,s.forEach((t=>t.style.opacity=".5")),s[this.slideIndex].style.opacity=1}moving(t){t.preventDefault();let e=t.clientX,s=this.startPosition-e+this.offset;this.container.style.transform=`translateX(${-s}px)`}endMoving(t){document.body.removeEventListener("mousemove",this.moving),document.body.removeEventListener("mouseup",this.endMoving),this.container.classList.add("animate");let e=t.clientX,s=this.startPosition>e?"left":"right";this.startPosition==e&&(s=this.direction);let i=0;"left"===s?(i=this.offset+this.scrollValue,this.slideIndex==this.count-1?this.slideIndex=0:this.slideIndex++,this.changeStateIndicators(this.slides,m,this.arrIndicators)):(i=this.offset-this.scrollValue,0==this.slideIndex?this.slideIndex=this.count-1:this.slideIndex--,this.changeStateIndicators(this.slides,m,this.arrIndicators)),i>=0&&i<this.count*this.scrollValue?this.offset=i:i>=this.count*this.scrollValue?this.offset=0:i<0&&(this.offset=this.count*this.scrollValue-this.scrollValue),this.container.style.transform=`translateX(${-this.offset}px)`,this.animationTimeoutID=setTimeout((()=>{this.container.classList.remove("animate")}),300)}}let y,p,L,S,w;function E(){console.log(y,p),document.querySelector(".calculating__result span").textContent=L&&S&&w?"male"===y?Math.round((88.36+13.4*S+4.8*L-5.7*w)*p):Math.round((447.6+9.2*S+3.1*L-4.3*w)*p):"____",localStorage.setItem("hGender",y),localStorage.setItem("activity",p)}function I(t,e){const s=document.querySelectorAll(`${t} div`);s.forEach((t=>{t.addEventListener("click",(t=>{s.forEach((t=>{t.classList.remove(e)})),t.target.classList.add(e),t.target.getAttribute("data-ratio")?p=+t.target.getAttribute("data-ratio"):y=t.target.getAttribute("id"),E()}))}))}o("http://localhost:3000/slider").then((t=>(t.forEach((t=>{d.append(((t,e)=>{const s=document.createElement("div");return s.classList.add("offer__slide"),s.innerHTML=`<img src=${t} alt=${e}>`,s})(t.img,t.alt))})),t))).then((t=>{const e=document.querySelectorAll(".offer__slide");d.style.width=100*e.length+"%",d.style.display="flex",d.style.transition="0.5s all",l.style.overflow="hidden",e.forEach((t=>{t.style.width=v})),h.style.width=v,Array.prototype.forEach.call(h.children,(t=>{t.style.width=+v.slice(0,v.length-2)/2+"px",t.style.height=window.getComputedStyle(document.querySelector(".offer__slide")).height,h.firstElementChild.style.width=+v.slice(0,v.length-2)/2+"px",h.firstElementChild.style.height=window.getComputedStyle(document.querySelector(".offer__slide")).height}));let s=new _(d,h);s.initHandler(),r.style.position="relative";const i=document.createElement("ol");i.classList.add("carousel-indicators"),r.append(i);for(let t=0;t<e.length;t++){const e=document.createElement("li");e.classList.add("dot"),e.setAttribute("data-slide-to",t+1),i.append(e),0==t&&(e.style.opacity=1),s.arrIndicators.push(e)}e.length<10?u.textContent=`0${e.length}`:u.textContent=`${e.length}`,s.changeStateIndicators(e,m,s.arrIndicators),f.addEventListener("click",(()=>{s.offset==+v.slice(0,v.length-2)*(e.length-1)?s.offset=0:s.offset+=+v.slice(0,v.length-2),d.style.transform=`translateX(-${s.offset}px)`,s.slideIndex==e.length-1?s.slideIndex=0:s.slideIndex++,s.changeStateIndicators(e,m,s.arrIndicators)})),g.addEventListener("click",(()=>{0==s.offset?s.offset=+v.slice(0,v.length-2)*(e.length-1):s.offset-=+v.slice(0,v.length-2),d.style.transform=`translateX(-${s.offset}px)`,0==s.slideIndex?s.slideIndex=e.length-1:s.slideIndex--,s.changeStateIndicators(e,m,s.arrIndicators)})),s.arrIndicators.forEach((t=>{t.addEventListener("click",(t=>{const i=t.target.getAttribute("data-slide-to");s.slideIndex=i-1,s.offset=v.slice(0,v.length-2)*s.slideIndex,d.style.transform=`translateX(-${s.offset}px)`,s.changeStateIndicators(e,m,s.arrIndicators)}))}))})),localStorage.getItem("hGender")||localStorage.setItem("hGender","female"),y=localStorage.getItem("hGender"),localStorage.getItem("activity")||localStorage.setItem("activity",1.375),p=localStorage.getItem("activity"),document.querySelectorAll(".calculating__choose div").forEach((t=>{t.classList.remove("calculating__choose-item_active"),t.getAttribute("id")===y&&t.classList.add("calculating__choose-item_active"),t.getAttribute("data-ratio")===p&&t.classList.add("calculating__choose-item_active")})),E(),document.querySelectorAll(".calculating__choose_medium input").forEach((t=>{t.addEventListener("input",(t=>{switch(t.target.value.match(/\D/g)?t.target.style.border="1px solid red":t.target.style.border="none",t.target.getAttribute("id")){case"height":L=+t.target.value;break;case"weight":S=+t.target.value;break;case"age":w=+t.target.value}E()}))})),I("#gender","calculating__choose-item_active"),I(".calculating__choose_big","calculating__choose-item_active")}))})();